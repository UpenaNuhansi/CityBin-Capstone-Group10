{
  "stats": {
    "suites": 1,
    "tests": 10,
    "passes": 8,
    "pending": 0,
    "failures": 2,
    "start": "2025-10-31T19:36:03.359Z",
    "end": "2025-10-31T19:36:58.626Z",
    "duration": 55267,
    "testsRegistered": 10,
    "passPercent": 80,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "b020fc0c-cdf7-47cf-8724-17dfe8f5ec6e",
      "title": "",
      "fullFile": "cypress\\e2e\\frontend\\bin-management.cy.js",
      "file": "cypress\\e2e\\frontend\\bin-management.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "c22b6532-5a27-441e-aa94-f21689744a64",
          "title": "CityBin - Bin Management Page",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "should display the four key bin summary cards",
              "fullTitle": "CityBin - Bin Management Page should display the four key bin summary cards",
              "timedOut": null,
              "duration": 11918,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "['Total Bins', 'Active Bins', 'Full Bins', 'Maintenance Issues'].forEach(label => {\n  cy.contains(label, {\n    timeout: 10000\n  }).scrollIntoView().should('exist');\n});",
              "err": {},
              "uuid": "3bac6dd2-03dd-48a0-8638-05c2bbe8d5a6",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display the map and search input",
              "fullTitle": "CityBin - Bin Management Page should display the map and search input",
              "timedOut": null,
              "duration": 3094,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('Bin Map - Sabaragamuwa University', {\n  timeout: 15000\n}).scrollIntoView().should('exist');\n// This targets the map-specific search input\ncy.get('input[placeholder=\"Search areas...\"]').should('exist').type('library');",
              "err": {},
              "uuid": "5ecec147-0f22-42f6-b9db-d00a1947374e",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should load the bins table with correct headers",
              "fullTitle": "CityBin - Bin Management Page should load the bins table with correct headers",
              "timedOut": null,
              "duration": 1175,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const headers = ['Bin', 'Location', 'Waste Level', 'Maintenance', 'Device Status', 'Assigned To', 'Actions'];\nheaders.forEach(header => {\n  cy.get('table thead', {\n    timeout: 15000\n  }).scrollIntoView().contains(header).should('exist');\n});",
              "err": {},
              "uuid": "26dd1c49-6ac9-4e29-b9ce-0c7d15f70aa7",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open Add New Bin modal and add a bin successfully",
              "fullTitle": "CityBin - Bin Management Page should open Add New Bin modal and add a bin successfully",
              "timedOut": null,
              "duration": 10046,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('button', 'Add New Bin').should('be.visible').click();\ncy.contains('Add New Bin').should('be.visible');\n// FIX 1: Fill the required Bin ID field (required for button to be enabled)\ncy.get('input[placeholder=\"e.g., CB001\"]').type(`CB-TEST-${Date.now()}`);\n// FIX 2: Use the select() command on the Location dropdown (first select)\ncy.contains('label', 'Location').next('select').select('Main Entrance Gate');\n// Select Initial Waste Level using label\ncy.contains('label', 'Initial Waste Level (%)').next('input').clear().type('5');\n// FIX 3: Use the correct option value 'offline' or 'online'\ncy.contains('label', 'Device Status').next('select').select('online');\n// Click \"Add Bin\" (no longer need force:true since required fields are filled)\ncy.contains('button', 'Add Bin').should('be.enabled').click();\n// Wait for confirmation message\n//cy.contains('Bin added successfully', { timeout: 15000 }).should('exist');",
              "err": {},
              "uuid": "a31d0eb9-1b71-4940-8a15-378c58770779",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open Assign Maintenance modal and assign operator",
              "fullTitle": "CityBin - Bin Management Page should open Assign Maintenance modal and assign operator",
              "timedOut": null,
              "duration": 3905,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.get('table tbody tr', {\n  timeout: 20000\n}).first().as('firstRow');\ncy.get('@firstRow').find('button').contains('Assign').click();\ncy.get('.bg-white', {\n  timeout: 10000\n}).should('contain.text', 'Assign Maintenance');\n// FIX: Select the first available operator (index 1 skips the 'Select an operator' option)\ncy.contains('label', 'Assign to Operator').next('select').select(1);\ncy.contains('button', 'Assign').scrollIntoView().click({\n  force: true\n});\n//cy.contains('Operator assigned successfully', { timeout: 15000 }).should('exist');",
              "err": {},
              "uuid": "79bf0d5d-0253-4177-86bc-0f630704cf9c",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open and close operator info popup when clicking an assigned operator ID",
              "fullTitle": "CityBin - Bin Management Page should open and close operator info popup when clicking an assigned operator ID",
              "timedOut": null,
              "duration": 5804,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Find a row that actually has an operator assigned\ncy.get('table tbody tr', {\n  timeout: 20000\n}).filter(':has(td:contains(\"CBU\"))') // only rows with operator IDs like CBU010\n.first().as('assignedBinRow');\n// If no operator exists, skip this test gracefully\ncy.get('@assignedBinRow').then($row => {\n  if ($row.length === 0) {\n    cy.log('No bins currently have an assigned operator. Skipping test.');\n    return;\n  }\n  // Otherwise, click the Assigned To cell\n  cy.wrap($row).find('td').eq(5).scrollIntoView().click({\n    force: true\n  });\n  // Verify the popup appears\n  cy.contains('Operator Assignment Info', {\n    timeout: 10000\n  }).should('be.visible');\n  // Close it\n  cy.contains('button', 'Close').click();\n  // Verify it disappears\n  cy.contains('Operator Assignment Info').should('not.exist');\n});",
              "err": {
                "message": "AssertionError: Timed out retrying after 4000ms: Expected to find element: `:has(td:contains(\"CBU\"))`, but never found it. Queried from:\n\n              > cy.get(table tbody tr, [object Object])",
                "estack": "AssertionError: Timed out retrying after 4000ms: Expected to find element: `:has(td:contains(\"CBU\"))`, but never found it. Queried from:\n\n              > cy.get(table tbody tr, [object Object])\n    at Context.eval (webpack://citybin-repo/./cypress/e2e/frontend/bin-management.cy.js:181:5)",
                "diff": null
              },
              "uuid": "ef7ce980-329c-48a1-af27-bc4347c23eeb",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should edit bin maintenance to OK and automatically unassign operator",
              "fullTitle": "CityBin - Bin Management Page should edit bin maintenance to OK and automatically unassign operator",
              "timedOut": null,
              "duration": 6632,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Find a row that has \"Required\" (since we’ll change it to OK)\ncy.get('table tbody tr', {\n  timeout: 20000\n}).contains('Required').first().parents('tr').as('binRow');\n// Click Edit\ncy.get('@binRow').find('button').contains('Edit').click({\n  force: true\n});\n// Wait for modal\ncy.get('.bg-white', {\n  timeout: 10000\n}).should('contain.text', 'Edit Bin').and('be.visible');\n// Change maintenance status to OK\ncy.contains('label', 'Maintenance Status').next('select').select('OK');\ncy.contains('button', 'Save').should('be.enabled').click();\n// Wait for UI to refresh (React rerenders)\ncy.wait(3000);\n// Re-fetch the updated table row\ncy.get('table tbody tr').first().find('td').eq(3).should('contain.text', 'OK');\n// Ensure operator column is cleared (“=”)\ncy.get('table tbody tr').first().find('td').eq(5).should('contain.text', '=');",
              "err": {
                "message": "AssertionError: Timed out retrying after 4000ms: Expected to find content: 'Required' within the element: <tr.hover:bg-green-50.transition.border-b.border-green-100> but never did.",
                "estack": "AssertionError: Timed out retrying after 4000ms: Expected to find content: 'Required' within the element: <tr.hover:bg-green-50.transition.border-b.border-green-100> but never did.\n    at Context.eval (webpack://citybin-repo/./cypress/e2e/frontend/bin-management.cy.js:214:5)",
                "diff": null
              },
              "uuid": "d339f5e7-ca15-4f18-954e-9f10406e26c4",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display colored waste level bars",
              "fullTitle": "CityBin - Bin Management Page should display colored waste level bars",
              "timedOut": null,
              "duration": 2103,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.get('table tbody tr', {\n  timeout: 20000\n}).each($row => {\n  cy.wrap($row).find('div[style*=\"background-color\"]').should('exist');\n});",
              "err": {},
              "uuid": "197f7c18-cf2a-4276-878e-ef491acfca1c",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should filter bins using TopBar search input",
              "fullTitle": "CityBin - Bin Management Page should filter bins using TopBar search input",
              "timedOut": null,
              "duration": 1818,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// FIX: Target the main search input (in the TopBar) instead of the Map search\n// We assume the main search is the first visible text input on the page, \n// excluding the explicitly defined 'Search areas...' map input.\ncy.get('input[type=\"text\"]').not('input[placeholder=\"Search areas...\"]').first().should('be.visible').type('CB'); // Search for a common Bin ID prefix\n// Assert table filters: only rows containing 'CB' should be visible\ncy.get('table tbody tr').each($row => {\n  cy.wrap($row).find('td').first().should('contain.text', 'CB'); // The Bin ID column contains the search term\n});",
              "err": {},
              "uuid": "3add1592-f2ce-4836-96ca-70fcff5b680b",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should refresh bin data periodically",
              "fullTitle": "CityBin - Bin Management Page should refresh bin data periodically",
              "timedOut": null,
              "duration": 7128,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.wait(6000); // Wait longer than the 5-second interval \ncy.get('table tbody tr').should('exist'); // Ensure the table is still present after refresh cycle",
              "err": {},
              "uuid": "f1205fcd-16c0-4952-b466-79a30346c8fb",
              "parentUUID": "c22b6532-5a27-441e-aa94-f21689744a64",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "3bac6dd2-03dd-48a0-8638-05c2bbe8d5a6",
            "5ecec147-0f22-42f6-b9db-d00a1947374e",
            "26dd1c49-6ac9-4e29-b9ce-0c7d15f70aa7",
            "a31d0eb9-1b71-4940-8a15-378c58770779",
            "79bf0d5d-0253-4177-86bc-0f630704cf9c",
            "197f7c18-cf2a-4276-878e-ef491acfca1c",
            "3add1592-f2ce-4836-96ca-70fcff5b680b",
            "f1205fcd-16c0-4952-b466-79a30346c8fb"
          ],
          "failures": [
            "ef7ce980-329c-48a1-af27-bc4347c23eeb",
            "d339f5e7-ca15-4f18-954e-9f10406e26c4"
          ],
          "pending": [],
          "skipped": [],
          "duration": 53623,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.2.0"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "cypress/reports",
        "overwrite": false,
        "html": true,
        "json": true
      },
      "version": "6.3.0"
    }
  }
}