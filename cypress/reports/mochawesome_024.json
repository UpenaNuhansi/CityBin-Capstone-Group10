{
  "stats": {
    "suites": 1,
    "tests": 11,
    "passes": 10,
    "pending": 0,
    "failures": 1,
    "start": "2025-11-05T19:14:56.166Z",
    "end": "2025-11-05T19:15:58.517Z",
    "duration": 62351,
    "testsRegistered": 11,
    "passPercent": 90.9090909090909,
    "pendingPercent": 0,
    "other": 0,
    "hasOther": false,
    "skipped": 0,
    "hasSkipped": false
  },
  "results": [
    {
      "uuid": "075d3d7f-a791-4de0-926a-ab0ea9e5b9a0",
      "title": "",
      "fullFile": "cypress\\e2e\\frontend\\bin-management.cy.js",
      "file": "cypress\\e2e\\frontend\\bin-management.cy.js",
      "beforeHooks": [],
      "afterHooks": [],
      "tests": [],
      "suites": [
        {
          "uuid": "ec21de70-27ec-4e78-803b-a66724a7639f",
          "title": "CityBin - Bin Management Page",
          "fullFile": "",
          "file": "",
          "beforeHooks": [],
          "afterHooks": [],
          "tests": [
            {
              "title": "should display the four key bin summary cards",
              "fullTitle": "CityBin - Bin Management Page should display the four key bin summary cards",
              "timedOut": null,
              "duration": 12893,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "['Total Bins', 'Active Bins', 'Full Bins', 'Maintenance Issues'].forEach(label => {\n  cy.contains(label, {\n    timeout: 10000\n  }).scrollIntoView().should('exist');\n});",
              "err": {},
              "uuid": "143be5c0-a1a4-4b40-89f1-238deb1d3bb9",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display the map and search input",
              "fullTitle": "CityBin - Bin Management Page should display the map and search input",
              "timedOut": null,
              "duration": 3585,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('Bin Map - Sabaragamuwa University', {\n  timeout: 15000\n}).scrollIntoView().should('exist');\n// This targets the map-specific search input\ncy.get('input[placeholder=\"Search areas...\"]').should('exist').type('library');",
              "err": {},
              "uuid": "551dd9fa-e44e-49f1-90af-9484706e80f9",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should load the bins table with correct headers",
              "fullTitle": "CityBin - Bin Management Page should load the bins table with correct headers",
              "timedOut": null,
              "duration": 2909,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "const headers = ['Bin', 'Location', 'Waste Level', 'Maintenance', 'Device Status', 'Assigned To', 'Actions'];\nheaders.forEach(header => {\n  cy.get('table thead', {\n    timeout: 15000\n  }).scrollIntoView().contains(header).should('exist');\n});",
              "err": {},
              "uuid": "4c2ce6cd-0c85-4d17-8971-a5fcfa0a69b5",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open Add New Bin modal and add a bin successfully",
              "fullTitle": "CityBin - Bin Management Page should open Add New Bin modal and add a bin successfully",
              "timedOut": null,
              "duration": 10384,
              "state": "passed",
              "speed": "slow",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.contains('button', 'Add New Bin').should('be.visible').click();\ncy.contains('Add New Bin').should('be.visible');\n// FIX 1: Fill the required Bin ID field (required for button to be enabled)\ncy.get('input[placeholder=\"e.g., CB001\"]').type(`CB-TEST-${Date.now()}`);\n// FIX 2: Use the select() command on the Location dropdown (first select)\ncy.contains('label', 'Location').next('select').select('Main Entrance Gate');\n// Select Initial Waste Level using label\ncy.contains('label', 'Initial Waste Level (%)').next('input').clear().type('5');\n// FIX 3: Use the correct option value 'offline' or 'online'\ncy.contains('label', 'Device Status').next('select').select('online');\n// Click \"Add Bin\" (no longer need force:true since required fields are filled)\ncy.contains('button', 'Add Bin').should('be.enabled').click();\n// Wait for confirmation message\n//cy.contains('Bin added successfully', { timeout: 15000 }).should('exist');",
              "err": {},
              "uuid": "d8407044-f078-44cb-a8aa-edc0e72d2649",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open Edit Bin modal, change maintenance to Required, and assign operator",
              "fullTitle": "CityBin - Bin Management Page should open Edit Bin modal, change maintenance to Required, and assign operator",
              "timedOut": null,
              "duration": 5021,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.get('table tbody tr', {\n  timeout: 20000\n}).contains('OK') // pick a bin that currently no need maintenance\n.first().parents('tr').as('binRow');\n// Click the Edit button for that row\ncy.get('@binRow').find('button').contains('Edit').click({\n  force: true\n});\n// Ensure the Edit modal appears\ncy.get('.bg-white', {\n  timeout: 10000\n}).should('contain.text', 'Edit Bin').and('be.visible');\n// Change Maintenance Status to Required\ncy.contains('label', 'Maintenance Status').next('select').select('Required');\n// Save changes\ncy.contains('button', 'Save').should('be.enabled').click();\n// Wait for success toast (if any)\n// cy.contains('Bin updated successfully', { timeout: 15000 }).should('exist');\n// Verify the binâ€™s Maintenance column now shows OK\n// cy.get('@binRow')\n//   .find('td')\n//   .eq(3) // Maintenance column\n//   .should('contain.text', 'Required');\n//   // Verify the Assigned To column is now unassigned (\"â€“\")\n//   cy.get('@binRow')\n//     .find('td')\n//     .eq(5)\n//     .should('contain.text', '=');",
              "err": {},
              "uuid": "d94f2c61-e82b-4b9b-8a2c-39da812c3d6b",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open Assign Maintenance modal and assign operator",
              "fullTitle": "CityBin - Bin Management Page should open Assign Maintenance modal and assign operator",
              "timedOut": null,
              "duration": 2211,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.get('table tbody tr', {\n  timeout: 20000\n}).first().as('firstRow');\ncy.get('@firstRow').find('button').contains('Assign').click();\ncy.get('.bg-white', {\n  timeout: 10000\n}).should('contain.text', 'Assign Maintenance');\n// FIX: Select the first available operator (index 1 skips the 'Select an operator' option)\ncy.contains('label', 'Assign to Operator').next('select').select(1);\ncy.contains('button', 'Assign').scrollIntoView().click({\n  force: true\n});\n//ðŸ›‘cy.contains('Operator assigned successfully', { timeout: 15000 }).should('exist');",
              "err": {},
              "uuid": "5a2e5d7a-6449-418a-9adc-ab3db968c5c1",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should open and close operator info popup when clicking an assigned operator ID",
              "fullTitle": "CityBin - Bin Management Page should open and close operator info popup when clicking an assigned operator ID",
              "timedOut": null,
              "duration": 6011,
              "state": "failed",
              "speed": null,
              "pass": false,
              "fail": true,
              "pending": false,
              "context": null,
              "code": "// Find a row that actually has an operator assigned\ncy.get('table tbody tr', {\n  timeout: 20000\n}).filter(':has(td:contains(\"CBU\"))') // only rows with operator IDs like CBU010\n.first().as('assignedTo');\n// If no operator exists, skip this test gracefully\ncy.get('@assignedTo').then($row => {\n  if ($row.length === 0) {\n    cy.log('No bins currently have an assigned operator. Skipping test.');\n    return;\n  }\n  // Otherwise, click the Assigned To cell\n  cy.wrap($row).find('td').eq(5).scrollIntoView().click({\n    force: true\n  });\n  // Verify the popup appears\n  cy.contains('Operator Assignment Info', {\n    timeout: 10000\n  }).should('be.visible');\n  // Close it\n  cy.contains('button', 'Close').click();\n  // Verify it disappears\n  cy.contains('Operator Assignment Info').should('not.exist');\n});",
              "err": {
                "message": "AssertionError: Timed out retrying after 4000ms: Expected to find element: `:has(td:contains(\"CBU\"))`, but never found it. Queried from:\n\n              > cy.get(table tbody tr, [object Object])",
                "estack": "AssertionError: Timed out retrying after 4000ms: Expected to find element: `:has(td:contains(\"CBU\"))`, but never found it. Queried from:\n\n              > cy.get(table tbody tr, [object Object])\n    at Context.eval (webpack://citybin-repo/./cypress/e2e/frontend/bin-management.cy.js:159:5)",
                "diff": null
              },
              "uuid": "194724d5-4e20-40f6-b4cd-db80758bc281",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should edit bin maintenance to OK and automatically unassign operator",
              "fullTitle": "CityBin - Bin Management Page should edit bin maintenance to OK and automatically unassign operator",
              "timedOut": null,
              "duration": 6160,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Find a row that has \"Required\" (since weâ€™ll change it to OK)\ncy.get('table tbody tr', {\n  timeout: 20000\n}).contains('Required').first().parents('tr').as('binRow');\n// Click Edit\ncy.get('@binRow').find('button').contains('Edit').click({\n  force: true\n});\n// Wait for modal\ncy.get('.bg-white', {\n  timeout: 10000\n}).should('contain.text', 'Edit Bin').and('be.visible');\n// Change maintenance status to OK\ncy.contains('label', 'Maintenance Status').next('select').select('OK');\ncy.contains('button', 'Save').should('be.enabled').click();\n// Wait for UI to refresh (React rerenders)\ncy.wait(3000);\n// Re-fetch the updated table row\ncy.get('table tbody tr').first().find('td').eq(3).should('contain.text', 'OK');\n// Ensure operator column is cleared (â€œ=â€)\n// cy.get('table tbody tr')\n//   .first()\n//   .find('td')\n//   .eq(5)\n//   .should('contain.text', '=');",
              "err": {},
              "uuid": "db1553a9-9e24-4192-97cb-728ac022217f",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should display colored waste level bars",
              "fullTitle": "CityBin - Bin Management Page should display colored waste level bars",
              "timedOut": null,
              "duration": 1756,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.get('table tbody tr', {\n  timeout: 20000\n}).each($row => {\n  cy.wrap($row).find('div[style*=\"background-color\"]').should('exist');\n});",
              "err": {},
              "uuid": "1a44a851-3701-44a3-9e21-f36d92eea166",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should filter bins using TopBar search input",
              "fullTitle": "CityBin - Bin Management Page should filter bins using TopBar search input",
              "timedOut": null,
              "duration": 1819,
              "state": "passed",
              "speed": "fast",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "// Target the main search input (in the TopBar) instead of the Map search\n//We assume the main search is the first visible text input on the page, \n// excluding the explicitly defined 'Search areas...' map input.\ncy.get('input[type=\"text\"]').not('input[placeholder=\"Search areas...\"]').first().should('be.visible').type('CB'); // Search for a common Bin ID prefix\n// Assert table filters: only rows containing 'CB' should be visible\ncy.get('table tbody tr').each($row => {\n  cy.wrap($row).find('td').first().should('contain.text', 'CB'); // The Bin ID column contains the search term\n});",
              "err": {},
              "uuid": "51c6f697-594d-4af7-bb88-53bd87778ec1",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            },
            {
              "title": "should refresh bin data periodically",
              "fullTitle": "CityBin - Bin Management Page should refresh bin data periodically",
              "timedOut": null,
              "duration": 7337,
              "state": "passed",
              "speed": "medium",
              "pass": true,
              "fail": false,
              "pending": false,
              "context": null,
              "code": "cy.wait(6000); // Wait longer than the 5-second interval \ncy.get('table tbody tr').should('exist'); // Ensure the table is still present after refresh cycle",
              "err": {},
              "uuid": "75abdc9b-35e8-41eb-b3d4-fa480551ada1",
              "parentUUID": "ec21de70-27ec-4e78-803b-a66724a7639f",
              "isHook": false,
              "skipped": false
            }
          ],
          "suites": [],
          "passes": [
            "143be5c0-a1a4-4b40-89f1-238deb1d3bb9",
            "551dd9fa-e44e-49f1-90af-9484706e80f9",
            "4c2ce6cd-0c85-4d17-8971-a5fcfa0a69b5",
            "d8407044-f078-44cb-a8aa-edc0e72d2649",
            "d94f2c61-e82b-4b9b-8a2c-39da812c3d6b",
            "5a2e5d7a-6449-418a-9adc-ab3db968c5c1",
            "db1553a9-9e24-4192-97cb-728ac022217f",
            "1a44a851-3701-44a3-9e21-f36d92eea166",
            "51c6f697-594d-4af7-bb88-53bd87778ec1",
            "75abdc9b-35e8-41eb-b3d4-fa480551ada1"
          ],
          "failures": [
            "194724d5-4e20-40f6-b4cd-db80758bc281"
          ],
          "pending": [],
          "skipped": [],
          "duration": 60086,
          "root": false,
          "rootEmpty": false,
          "_timeout": 2000
        }
      ],
      "passes": [],
      "failures": [],
      "pending": [],
      "skipped": [],
      "duration": 0,
      "root": true,
      "rootEmpty": true,
      "_timeout": 2000
    }
  ],
  "meta": {
    "mocha": {
      "version": "7.2.0"
    },
    "mochawesome": {
      "options": {
        "quiet": false,
        "reportFilename": "mochawesome",
        "saveHtml": true,
        "saveJson": true,
        "consoleReporter": "spec",
        "useInlineDiffs": false,
        "code": true
      },
      "version": "7.1.4"
    },
    "marge": {
      "options": {
        "reportDir": "cypress/reports",
        "overwrite": false,
        "html": true,
        "json": true
      },
      "version": "6.3.0"
    }
  }
}